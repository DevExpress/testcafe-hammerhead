<!DOCTYPE html>
<html>
<head>
    <title></title>
    <meta charset="utf-8">
    <script src="/hammerhead.js" class="script-hammerhead-shadow-ui"></script>
</head>
<body>
<script type="text/javascript">
    var hammerhead = window['%hammerhead%'];

    hammerhead.get('./utils/destination-location').forceLocation('http://localhost/sessionId/http://origin_iframe_host');
    hammerhead.start({ crossDomainProxyPort: 2000 });

    var INSTRUCTION = hammerhead.get('../processing/script/instruction');
    var postMessage = hammerhead.sandbox.event.message.postMessage;

    var getLocation     = window[INSTRUCTION.getLocation];
    var locationWrapper = getLocation(window.location);
    var ancestorOrigins = locationWrapper.ancestorOrigins;

    window.onmessage = function (evt) {
        if (evt.data = 'get ancestorOrigin') {
            var data = {
                msg: JSON.stringify({ancestorOrigins: ancestorOrigins, ancestorOriginsLength: ancestorOrigins.length})
            };

            postMessage(window.parent, [data, '*']);
        }
    };
</script>
</body>
</html>
